# 第三章 Python 序列 —— 元组（三）

标签（空格分隔）： python 会python就够了

---

## 3.4 元组

元组实际上是跟列表非常相近的另一种容器类型。元组和列表看起来不同的地方是元组用圆括号，列表用方括号。而在功能上，元组和列表相比有一个很重要的区别，元组是一种不可变类型。

### 3.4.1 操作符和内建函数

- 创建、重复、连接操作
- 成员关系操作、切片操作 （in，not in）
- 内建函数 （str，max，min，cmp，list）
- 操作符 （ < > == != ）

### 3.4.2 元组的特殊特性

- **元组具有不可变性，简单来讲，就意味着一旦一个对象被定义了，它的值就不能再被更新，除非重新创建一个新的对象。**

- 元组虽然被定义成不可变的，但是这并不影响它的灵活性。元组可以进行 CRUD 等操作，这样的操作一定都没有改变那些小元组。

- 默认集合类型。所有的多对象的、逗号分隔的、没有明确定义的（比如方括号表示列表，圆括号表示元组），这些集合默认的都是元组。

```bash
>>> 'abc', 1234, '345', 18+6j
('abc', 1234, '345', (18+6j))
>>> a,b = 9,0
>>> a
9
>>> b
0
>>> a,b
(9, 0)
>>> 
```

所有函数返回的多对象（不包括有符号封装的）都是元组类型。为了避免令人生厌的副作用，建议总是显式地用圆括号表达式表示元组或创建元组。

```bash
>>> def foo1():
...     return obj1,obj2,obj3
... 
>>> def foo2():
...     return [obj1,obj2,obj3]
... 
>>> def foo3():
...     return (obj1,obj2,obj3)
... 
>>> 
```

foo1() 返回 3 个对象，默认为一个 3 元组类型。 foo2() 返回一个但一对象，一个包含三个对象的列表。foo3() 返回一个跟 foo1() 相同的对象，唯一不同的是这里的元组是显式定义的。

- 单元素元组

```bash
>>>('abc',)
('abc',)
```

单元素元组的实现只有以上实例的一种变通方法。

```bash
>>> ('abc')
'abc'
>>> type(('abc'))
<type 'str'>
>>> 
```

圆括号包裹的一个单一元素首先被作为分组操作，而不是作为元组的分界符。所以，你无论如何，都得不到想要的单元素元组。

## 3.5 拷贝 python 对象，浅拷贝和深拷贝

关于拷贝操作，有几点需要注意：

- 第一，非容器类型（比如数字、字符串和其它“原子”类型的对象，像代码、类型和 xrange 对象等）没有被拷贝一说，浅拷贝是用来完全切片操作来完成的。
- 第二，如果元组变量只包含源自类型对象，对它的深拷贝将不会进行。

浅拷贝实例——数字类型

```bash
>>> aa = [1,2,3]
>>> import copy
>>> bb = copy.copy(aa)
>>> print id(aa)
139771564866520
>>> print id (bb)
139771564454544
>>> print [ id(x) for x in aa]
[19554648, 19554624, 19554600]
>>> print [ id(x) for x in bb]
[19554648, 19554624, 19554600]
>>> print [ id(y) for y in bb]
[19554648, 19554624, 19554600]
>>> bb[0] = 66
>>> print id(aa)
139771564866520
>>> print id (bb)
139771564454544
>>> print aa
[1, 2, 3]
>>> print bb
[66, 2, 3]
>>> print [ id(x) for x in aa]
[19554648, 19554624, 19554600]
>>> print [ id(x) for x in bb]
[19555080, 19554624, 19554600]
>>> 
```

通过以上实例可以明显看出，由于数字不可变，修改的时候会替换旧的对象。

浅拷贝实例——列表类型

```bash
>>> list1 = [['1'], ['2'], ['3']]
>>> copyList1 = copy.copy(list1)
>>> copyList1[2].append('6')
>>> print copyList1
[['1'], ['2'], ['3', '6']]
>>> print list1
[['1'], ['2'], ['3', '6']]
>>> 
```
以上实例表明，当进行浅拷贝时，列表元素只是把它的引用复制了一下，成员没有被复制。

深拷贝实例

```bash
>>> copyList1 = copy.deepcopy(list1)
>>> copyList1[2].append('6')
>>> print copyList1
[['1'], ['2'], ['3', '6', '6']]
>>> print list1
[['1'], ['2'], ['3', '6']]
>>> 
```

完全拷贝需要 copy.deepcooy() 函数。
